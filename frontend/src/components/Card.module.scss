@import '../styles/variables.scss';
@import '../styles/mixins.scss';

// Base Card Styles
.card {
  @include card-base;
  position: relative;
  
  &.hoverable {
    cursor: default;
    
    &:hover {
      @include card-hover;
    }
  }
  
  &.clickable {
    @include card-interactive;
    border: none;
    text-align: left;
    font-family: inherit;
    
    &:focus {
      @include focus-ring;
    }
  }
  
  &.loading {
    pointer-events: none;
    
    .loadingOverlay {
      @include absolute-fill;
      @include flex-center;
      background: var(--bg-overlay);
      border-radius: var(--radius-lg);
      z-index: var(--z-10);
      
      &::after {
        content: '';
        width: 24px;
        height: 24px;
        border: 2px solid var(--border-primary);
        border-top: 2px solid var(--primary-500);
        border-radius: var(--radius-full);
        animation: spin 1s linear infinite;
      }
    }
  }
}

// Padding variants
.default {
  padding: var(--space-6);
  
  @include mobile-only {
    padding: var(--space-4);
  }
}

.compact {
  padding: var(--space-4);
  
  @include mobile-only {
    padding: var(--space-3);
  }
}

.spacious {
  padding: var(--space-8);
  
  @include mobile-only {
    padding: var(--space-6);
  }
}

.none {
  padding: 0;
}

// Card Header
.cardHeader {
  @include flex-start;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
}

.cardIcon {
  @include flex-center;
  width: 48px;
  height: 48px;
  background: var(--primary-100);
  color: var(--primary-600);
  border-radius: var(--radius-lg);
  font-size: var(--text-2xl);
  flex-shrink: 0;
}

.cardTitleWrapper {
  flex: 1;
  min-width: 0;
}

.cardTitle {
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin: 0 0 var(--space-1) 0;
  @include text-truncate;
}

.cardSubtitle {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin: 0;
  @include text-truncate;
}

.cardContent {
  flex: 1;
}

// Stats Card Variant
.stats {
  .statsContent {
    @include flex-between;
    align-items: flex-start;
  }
  
  .statsMain {
    flex: 1;
  }
  
  .statsValue {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--text-primary);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-1);
    
    @include mobile-only {
      font-size: var(--text-2xl);
    }
  }
  
  .statsLabel {
    font-size: var(--text-sm);
    color: var(--text-muted);
    font-weight: var(--font-medium);
  }
  
  .statsIcon {
    @include flex-center;
    width: 56px;
    height: 56px;
    background: var(--primary-100);
    color: var(--primary-600);
    border-radius: var(--radius-xl);
    font-size: var(--text-2xl);
    
    @include mobile-only {
      width: 48px;
      height: 48px;
      font-size: var(--text-xl);
    }
  }
  
  .statsChange {
    @include flex-start;
    gap: var(--space-2);
    margin-top: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-primary);
    
    .changeValue {
      font-size: var(--text-sm);
      font-weight: var(--font-semibold);
    }
    
    .changeLabel {
      font-size: var(--text-xs);
      color: var(--text-muted);
    }
    
    &.positive {
      .changeValue {
        color: var(--success-600);
      }
    }
    
    &.negative {
      .changeValue {
        color: var(--error-600);
      }
    }
    
    &.neutral {
      .changeValue {
        color: var(--text-secondary);
      }
    }
  }
}

// Action Card Variant
.action {
  @include flex-column;
  text-align: center;
  
  .actionIcon {
    @include flex-center;
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary-100), var(--primary-200));
    color: var(--primary-600);
    border-radius: var(--radius-2xl);
    font-size: var(--text-3xl);
    margin: 0 auto var(--space-4) auto;
  }
  
  .actionContent {
    margin-bottom: var(--space-6);
  }
  
  .actionTitle {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0 0 var(--space-2) 0;
  }
  
  .actionDescription {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin: 0;
  }
  
  .actionButton {
    @include button-primary;
    width: 100%;
  }
}

// Metric Card Variant
.metric {
  .metricHeader {
    @include flex-between;
    align-items: flex-start;
    margin-bottom: var(--space-4);
  }
  
  .metricInfo {
    flex: 1;
  }
  
  .metricTitle {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--text-muted);
    margin: 0 0 var(--space-2) 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .metricValue {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--text-primary);
    line-height: var(--leading-tight);
    
    @include mobile-only {
      font-size: var(--text-xl);
    }
  }
  
  .metricUnit {
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    color: var(--text-muted);
    margin-left: var(--space-1);
  }
  
  .metricIcon {
    @include flex-center;
    width: 40px;
    height: 40px;
    background: var(--primary-100);
    color: var(--primary-600);
    border-radius: var(--radius-lg);
    font-size: var(--text-xl);
  }
  
  .metricTrend {
    @include flex-start;
    gap: var(--space-2);
    align-items: center;
    
    .trendIndicator {
      width: 8px;
      height: 8px;
      border-radius: var(--radius-full);
    }
    
    .trendValue {
      font-size: var(--text-xs);
      font-weight: var(--font-medium);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    &.up {
      .trendIndicator {
        background: var(--success-500);
      }
      
      .trendValue {
        color: var(--success-600);
      }
    }
    
    &.down {
      .trendIndicator {
        background: var(--error-500);
      }
      
      .trendValue {
        color: var(--error-600);
      }
    }
    
    &.stable {
      .trendIndicator {
        background: var(--warning-500);
      }
      
      .trendValue {
        color: var(--warning-600);
      }
    }
  }
  
  // Color variants for metric cards
  &.primary {
    .metricIcon {
      background: var(--primary-100);
      color: var(--primary-600);
    }
  }
  
  &.secondary {
    .metricIcon {
      background: var(--secondary-100);
      color: var(--secondary-600);
    }
  }
  
  &.success {
    .metricIcon {
      background: var(--success-100);
      color: var(--success-600);
    }
  }
  
  &.warning {
    .metricIcon {
      background: var(--warning-100);
      color: var(--warning-600);
    }
  }
  
  &.error {
    .metricIcon {
      background: var(--error-100);
      color: var(--error-600);
    }
  }
  
  &.info {
    .metricIcon {
      background: var(--info-100);
      color: var(--info-600);
    }
  }
}

// Card animations
.card {
  @include fade-in;
}

// Dark mode adjustments
:root[data-theme="dark"] {
  .card {
    .cardIcon {
      background: var(--primary-800);
      color: var(--primary-300);
    }
    
    .statsIcon {
      background: var(--primary-800);
      color: var(--primary-300);
    }
    
    .actionIcon {
      background: linear-gradient(135deg, var(--primary-800), var(--primary-700));
      color: var(--primary-300);
    }
    
    .metricIcon {
      background: var(--primary-800);
      color: var(--primary-300);
    }
    
    .statsChange {
      &.positive {
        .changeValue {
          color: var(--success-400);
        }
      }
      
      &.negative {
        .changeValue {
          color: var(--error-400);
        }
      }
    }
    
    .metricTrend {
      &.up {
        .trendValue {
          color: var(--success-400);
        }
      }
      
      &.down {
        .trendValue {
          color: var(--error-400);
        }
      }
      
      &.stable {
        .trendValue {
          color: var(--warning-400);
        }
      }
    }
  }
  
  // Dark mode color variants
  .metric {
    &.primary .metricIcon {
      background: var(--primary-800);
      color: var(--primary-300);
    }
    
    &.secondary .metricIcon {
      background: var(--secondary-800);
      color: var(--secondary-300);
    }
    
    &.success .metricIcon {
      background: var(--success-800);
      color: var(--success-300);
    }
    
    &.warning .metricIcon {
      background: var(--warning-800);
      color: var(--warning-300);
    }
    
    &.error .metricIcon {
      background: var(--error-800);
      color: var(--error-300);
    }
    
    &.info .metricIcon {
      background: var(--info-800);
      color: var(--info-300);
    }
  }
}